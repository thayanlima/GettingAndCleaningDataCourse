#loading packages
library(dplyr)
library(base)
library(utils)
library(data.table)

#downloading the data
download.data <- function () {
  zip.url <- 'https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip'
  filename <- 'dataset.zip'
  download.file(zip.url, filename, method = 'curl')
  unzip(filename)
}

#reading data
features <- read.table("UCI HAR Dataset/features.txt")
actlab <- read.table("UCI HAR Dataset/activity_labels.txt", header=FALSE)
subtrain <- read.table("UCI HAR Dataset/train/subject_train.txt", header=FALSE)
ytrain <- read.table("UCI HAR Dataset/train/y_train.txt", header=FALSE)
xtrain <- read.table("UCI HAR Dataset/train/X_train.txt", header=FALSE)
subtest <- read.table("UCI HAR Dataset/test/subject_test.txt", header=FALSE)
ytest <- read.table("UCI HAR Dataset/test/y_test.txt", header=FALSE)
xtest <- read.table("UCI HAR Dataset/test/X_test.txt", header=FALSE)

#creating dataset
sub <- rbind(subtrain, subtest)
act <- rbind(ytrain, ytest)
feat <- rbind(xtrain, xtest)
colnames(feat) <- t(featNames[2])
colnames(act) <- "Activity"
colnames(sub) <- "Subject"
finaldataset <- cbind(feat,act,sub)

#extracting measurement
meanstdcolumns <- grep(".*Mean.*|.*Std.*", names(finaldataset), ignore.case = TRUE)
reqcolumns <- c(meanstdcolumns, 562, 563)
dim(finaldataset)
extracteddata <- finaldataset[,reqcolumns]
dim(extracteddata)


